!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.shiny=e()}(this,function(){"use strict";var t=function(t){return"number"==typeof t},e=function(t){return"string"==typeof t},n=function(){};if("undefined"!=typeof window&&void 0!==window.document&&"DeviceOrientationEvent"in window){var i=Math.PI/180,a=function(t,e){var n=r.patterns[t];if(!n)return null;var i=document.createElement("canvas");i.width=n.width,i.height=n.height;var a=i.getContext("2d");return a.fillStyle="rgba(0, 0, 0, "+(1-e)+")",a.fillRect(0,0,i.width,i.height),a.drawImage(n,0,0),i},r={orientationInitial:null,orientation:{alpha:null,beta:null,gamma:null},viewport:{width:window.innerWidth,height:window.innerHeight},origin:{x:0,y:0,z:300},patterns:{noise:function(t,e){var n=document.createElement("canvas");n.width=t,n.height=e;for(var i=n.getContext("2d"),a=0;a<t;a++)for(var r=0;r<e;r++)i.fillStyle="rgba(0, 0, 0, "+Math.random()+")",i.fillRect(a,r,1,1);return n}(64*window.devicePixelRatio,64*window.devicePixelRatio)},drawers:[]};n=function(t,e){return("string"==typeof t?Array.from(document.querySelectorAll(t)):Array.isArray(t)?t:[t]).map(function(t){return r.drawers.push(o(t,e))})};var o=function(e,n){void 0===n&&(n={});var i=function(e,n){var i=n.gradient;void 0===i&&(i={});var r=n.pattern;void 0===r&&(r={});var o=l(i.colors||["#fff","rgba(255,255,255,0)"]),c={x:i.flip&&i.flip.x?-1:1,y:i.flip&&i.flip.y?-1:1},d=t(r.opacity)?r.opacity:.25;return{type:n.type||"background",dirty:!0,styles:null,element:e,gradient:{type:i.type||"radial",flip:c,angle:i.angle||null,steps:o,scalar:i.scalar||{x:1,y:1}},pattern:{type:r.type||"none",data:r.type?a(r.type,d).toDataURL():null,opacity:d,size:{width:64,height:64}}}}(e,n),r=function(){i.styles=getComputedStyle(e);var t=function(t){var e=t.type,n=t.element,i=t.styles,a=t.pattern,r=t.gradient;n.style.position="static"===i.position?"relative":i.position;var o=document.createElement("span");o.className="shiny--wrapper";var l="position:absolute; pointer-events:none; user-select:none; background-attachment: fixed;",c=document.createElement("span"),d=c.style;if("border"===e){var p=parseFloat(i.borderTopWidth),u=parseFloat(i.borderLeftWidth),s=parseFloat(i.borderRightWidth),f=parseFloat(i.borderBottomWidth),h=parseFloat(i.borderTopLeftRadius),m=i.backgroundColor;l+="\n            border-radius: "+h+"px; \n            left: "+-u+"px;\n            top: "+-p+"px;\n            right: "+-s+"px;\n            bottom: "+-f+"px;";var g=document.createElement("div");g.style.cssText="position:absolute; \n            border-radius: "+(h-u)+"px; \n            left: "+u+"px;\n            top: "+p+"px;\n            right: "+s+"px;\n            bottom: "+f+"px;\n            background-color: "+m,c.appendChild(g)}else"background"===e?l+="left:0;top:0;width:100%;height:100%;border-radius:"+parseFloat(i.borderTopLeftRadius)+"px;":"text"===e&&(c.innerHTML=n.innerHTML,l+="color:transparent; background-clip: text; -webkit-background-clip: text; -moz-background-clip: text;");if(a.data){var y="url("+a.data+") 0 0 / "+a.size.width+"px "+a.size.height+"px;";l+="mask: "+y+"; -moz-mask: "+y+"; -webkit-mask: "+y+";"}if(d.cssText=l,o.appendChild(c),n.insertAdjacentElement("afterbegin",o),"linear"===r.type)return function(t,e){var n=t*r.flip.x+e*r.flip.y/2,i=r.steps.map(function(t){return t.colorRGBA+" "+100*(n+t.stop)+"%"}).join(", ");d.backgroundImage="linear-gradient("+r.angle+", "+i+")"};var v=r.steps.map(function(t){return t.colorRGBA+" "+100*t.stop+"%"}).join(", ");return function(t,e){d.backgroundImage="radial-gradient(100vmax 100vmax at "+100*(.5+t*r.flip.x*r.scalar.x)+"% "+100*(.5+e*r.flip.y*r.scalar.y)+"%, "+v+")"}}(i);o.write=function(e,n){t(e,n)}},o={read:function(){i.dirty&&(r(),i.dirty=!1)},write:function(){}};return o},l=function(n){return n.map(function(t){return e(t)?[t]:t}).map(function(n){return{color:e(n[0])?n[0]:n[1],opacity:t(n[n.length-1])?n[n.length-1]:null,stop:t(n[0])?n[0]:null}}).map(function(t,e,n){return Object.assign({},t,{opacity:null===t.opacity?1:t.opacity,stop:null===t.stop?e*(1/(n.length-1)):t.stop})}).map(function(t){return Object.assign({},t,{colorRGBA:c(t.color,t.opacity)})})},c=function(t,e){return"rgba"+d(t).slice(3,-1)+", "+e+")"},d=function(t){if(/rgb\(/.test(t))return t;var e=document.createElement("div");e.style.cssText="display:none;color:"+t,document.body.appendChild(e);var n=getComputedStyle(e).color;return e.parentNode.removeChild(e),n},p=function(t){return t*i},u=function(){!function(){if(r.orientationInitial){var t=r.orientation,e=r.orientationInitial,n=r.origin,i=r.viewport,a=e.alpha-t.alpha,o=e.beta-t.beta,l=e.gamma-t.gamma,c=n.x,d=n.y,u=n.z;c=c*Math.cos(-p(a))-d*Math.sin(-p(a)),d=(d=d*Math.cos(-p(a))+c*Math.sin(-p(a)))*Math.cos(-p(o))-u*Math.sin(-p(o)),u=(u=u*Math.cos(-p(o))+d*Math.sin(-p(o)))*Math.cos(-p(l))-c*Math.sin(-p(l)),c=c*Math.cos(-p(l))+u*Math.sin(-p(l));var s=i.width/i.height,f=c/(300*s),h=d/(300/s);r.drawers.forEach(function(t){return t.read()}),r.drawers.forEach(function(t){return t.write(f,h)})}}(),requestAnimationFrame(u)};document.addEventListener("visibilitychange",function(t){r.orientationInitial=null}),window.addEventListener("deviceorientation",function(t){null!==t.alpha&&(r.orientation.alpha=t.alpha,r.orientation.beta=t.beta,r.orientation.gamma=t.gamma,null===r.orientationInitial&&(r.orientationInitial={alpha:t.alpha,beta:t.beta,gamma:t.gamma},u()))})}return n});
//# sourceMappingURL=shiny.umd.js.map
